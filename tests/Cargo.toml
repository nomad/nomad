[package]
name = "tests"
version.workspace = true
edition.workspace = true
authors.workspace = true
license.workspace = true
publish.workspace = true

[lib]
# Needed to run Neovim tests.
crate-type = ["cdylib"]

[features]
auth = ["dep:auth"]
collab = ["dep:auth", "dep:collab", "dep:flume"]
mock = []
neovim = ["dep:neovim"]
neovim-nightly = ["neovim", "neovim/nightly"]
walkdir = ["dep:futures-executor", "dep:tempdir", "dep:walkdir"]

# Features that should only be enabled by the build script.
git-in-PATH = []

[dependencies]
abs-path = { workspace = true, features = ["macros"] }
ed = { workspace = true }
futures-lite = { workspace = true, features = ["default"] }
mock = { workspace = true }

# Auth-related dependencies.
auth = { workspace = true, optional = true, features = ["mock"] }

# Collab-related dependencies.
collab = { workspace = true, optional = true, features = ["mock"] }
flume = { workspace = true, optional = true }

# Neovim-related dependencies.
neovim = { workspace = true, optional = true, features = ["test"] }

# Walkdir-related dependencies.
futures-executor = { workspace = true, optional = true }
tempdir = { workspace = true, optional = true }
walkdir = { workspace = true, optional = true, features = ["gitignore"] }

[build-dependencies]
neovim = { workspace = true, features = ["test"] }

[lints]
workspace = true
